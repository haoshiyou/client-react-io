"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{43206:function(w,N,i){i.r(N),i.d(N,{default:function(){return Y}});var L=i(37066),D=i.n(L),x=i(68136),S=i(80063),F=i(22029),s=i.n(F),f={container:"container___ZV6Fu",loading:"loading___HRQ2V",mapContainer:"mapContainer___cv8F1"},a=i(33130),I=function(t){var c=t.name,n=t.loading,o=t.listData,d=s()(o,"[0].location_lat",0),r=s()(o,"[0].location_lng",0),e={center:{lat:37.41666,lng:-122.09106},zoom:11};return(0,a.jsxs)("div",{className:f.container,children:[n&&(0,a.jsx)("div",{className:f.loading,children:"Loading"}),!n&&(0,a.jsx)("div",{className:f.mapContainer,children:(0,a.jsx)(S.ZP,{bootstrapURLKeys:{key:"AIzaSyBMhjUXTNWE8oMeKFSOojf4FhBbbFRgS10"},defaultCenter:e.center,defaultZoom:e.zoom})})]})},M=I,T=M,j={container:"container____MpL6",loading:"loading___A9OBG"},v={container:"container___BETZf",gridContainer:"gridContainer___IfRHA",picContainer:"picContainer___M7Fbs",img:"img___KheDm",title:"title___G2dlm",locationAndDate:"locationAndDate___G43SS",pricing:"pricing___kIbFj"},y=[{val:1e3*60*1,text:"\u521A\u521A"},{val:1e3*60*60,text:"\u5206\u949F\u524D"},{val:1e3*60*60*24,text:"\u5C0F\u65F6\u524D"},{val:1e3*60*60*24*30,text:"\u5929\u524D"},{val:1e3*60*60*24*365,text:"\u4E2A\u6708\u524D"},{val:1e3*60*60*24*365,text:"\u5E74\u524D"}].reverse(),A=function(t){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,n=new Date(t).getTime(),o=new Date(c).getTime(),d=o-n,r="",e="";return y.some(function(l){if(r=l.text,e="".concat(Math.floor(d/l.val)),l.val<d)return l.val===1e3*60*1&&(e=""),!0}),"".concat(e," ").concat(r)},B=function(t){var c=t.list,n=c===void 0?{}:c,o=t.uid,d=s()(n,"name","--"),r=s()(n,"content","--"),e=s()(n,"price","--"),l=s()(n,"addressCity","--"),u=s()(n,"lastUpdated",""),p=u?A(u):"--",h=s()(n,"imageIds[0]",""),b=h?"http://res.cloudinary.com/xinbenlv/image/upload/c_fill,g_north,w_400,h_300,g_center/".concat(h,".jpg"):"";return(0,a.jsxs)("div",{className:v.container,children:[(0,a.jsxs)("div",{className:v.gridContainer,children:[(0,a.jsx)("div",{className:v.title,children:r}),(0,a.jsxs)("div",{className:v.locationAndDate,children:[l," ",p]}),(0,a.jsx)("div",{className:v.pricing,children:"".concat(e?"$".concat(e,"/\u6708"):"\u4EF7\u683C\u5F85\u8BAE")})]}),(0,a.jsx)("div",{className:v.picContainer,children:h&&(0,a.jsx)("img",{className:v.img,src:b,alt:"img"})})]})},U=B,Z=function(t){var c=t.name,n=t.loading,o=t.listData,d=o.sort(function(r,e){var l=s()(r,"lastUpdated",""),u=s()(e,"lastUpdated","");return new Date(l).getTime()<new Date(u).getTime()?1:-1}).slice(0,100).map(function(r){var e=s()(r,"uid","--");return(0,a.jsx)(U,{list:r,uid:e},e)});return(0,a.jsxs)("div",{className:j.container,children:[n&&(0,a.jsx)("div",{className:j.loading,children:"Loading"}),!n&&(0,a.jsx)("div",{className:j.listContainer,children:d})]})},H=Z,O=H,z=i(13367),E=i(25796),_={title:"title____ozcv",plusIcon:"plusIcon_____WUh",searchBox:"searchBox___VFJqr"},K=function(t){var c=t.name;return(0,a.jsxs)("div",{className:_.title,children:[(0,a.jsx)("div",{className:_.plusIcon,children:(0,a.jsx)(E.Z,{})}),(0,a.jsx)("div",{className:_.searchBox,children:(0,a.jsx)(z.Z,{placeholder:"\u641C\u7D22 \u533A\u57DF/\u57CE\u5E02"})})]})},P=K,V=P,R=i(82639),G=i(85219),C={title:"title___b5ztX",sort:"sort___td5oV",condition:"condition___i7XL2"},X=function(t){var c=t.name;return(0,a.jsxs)("div",{className:C.title,children:[(0,a.jsxs)("div",{className:C.sort,children:["\u6392\u5E8F",(0,a.jsx)(R.Z,{})]}),(0,a.jsxs)("div",{className:C.condition,children:["\u7B5B\u9009\u6761\u4EF6",(0,a.jsx)(G.Z,{})]})]})},W=X,$=W,J=i(92510),m={container:"container___ulS8A",searchContainer:"searchContainer___lfrVI",filterContainer:"filterContainer___nI45l",mapContainer:"mapContainer___Onay6",listContainer:"listContainer___r5KiT",actionContainer:"actionContainer___tnjK7",contentContainer:"contentContainer___vqT1m"},Q=function(){var t=(0,J.useModel)("global"),c=t.name,n=(0,x.useState)(!1),o=D()(n,2),d=o[0],r=o[1],e=(0,x.useState)([]),l=D()(e,2),u=l[0],p=l[1];return(0,x.useEffect)(function(){r(!0),fetch("https://haoshiyou-server-prod.herokuapp.com/api/HsyListings").then(function(h){return h.json()}).then(function(h){p(h),r(!1)})},[]),(0,a.jsxs)("div",{className:m.container,children:[(0,a.jsxs)("div",{className:m.actionContainer,children:[(0,a.jsx)("div",{className:m.searchContainer,children:(0,a.jsx)(V,{name:"Search"})}),(0,a.jsx)("div",{className:m.filterContainer,children:(0,a.jsx)($,{name:"Filter"})})]}),(0,a.jsxs)("div",{className:m.contentContainer,children:[(0,a.jsx)("div",{className:m.mapContainer,children:(0,a.jsx)(T,{name:"MapContainer",loading:d,listData:u})}),(0,a.jsx)("div",{className:m.listContainer,children:(0,a.jsx)(O,{name:"List",loading:d,listData:u})})]})]})},Y=Q}}]);
