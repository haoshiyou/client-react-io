"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{71671:function(pe,V,r){r.r(V),r.d(V,{default:function(){return Te}});var Y=r(37066),p=r.n(Y),T=r(68136),G=r(80063),X=r(22029),m=r.n(X),W=r(3303),O=r.n(W),K=function(e){return"".concat(e?"$".concat(e,"/\u6708"):"\u4EF7\u683C\u5F85\u8BAE")},F={container:"container___hIX9Z",isListHover:"isListHover___B_O7Y",markerEle:"markerEle___mqH4h",markerEleText:"markerEleText___Cr1hu"},t=r(33130),J=function(e){var i=e.text,n=e.uid,o=e.price,c=e.mouseoverId,l=e.setMouseoverId,d=e.mouseClickedId,v=e.setMouseClickedId,k=n===c,f=n===d,u=function(a){a.preventDefault(),l(n)},I=function(a){a.preventDefault(),l("")},g=function(a){a.preventDefault(),v(function(L){return L===n?"":n})};return(0,t.jsx)("div",{className:O()(F.container,(k||f)&&F.isListHover),onClick:g,onMouseOver:u,onMouseLeave:I,children:(0,t.jsx)("div",{className:O()(F.markerEle,(k||f)&&F.isListHover),children:(0,t.jsx)("div",{className:F.markerEleText,children:K(o)})})})},Q=J,b=Q,Z={container:"container___ZV6Fu",loading:"loading___HRQ2V",mapContainer:"mapContainer___cv8F1"},w=function(e){var i=e.loading,n=e.listData,o=e.mouseoverId,c=e.setMouseoverId,l=e.mouseClickedId,d=e.setMouseClickedId,v={center:{lat:37.52666,lng:-122.08106},zoom:10.4},k=n.map(function(u){var I=m()(u,"uid",""),g=m()(u,"title",""),s=m()(u,"price",""),a=m()(u,"location_lat",0),L=m()(u,"location_lng",0);return(0,t.jsx)(b,{text:g,lat:a,lng:L,price:s,uid:I,mouseoverId:o,setMouseoverId:c,mouseClickedId:l,setMouseClickedId:d},I)}),f=function(I){I.preventDefault(),c("")};return(0,t.jsxs)("div",{className:Z.container,children:[i&&(0,t.jsx)("div",{className:Z.loading,children:"Loading"}),!i&&(0,t.jsx)("div",{className:Z.mapContainer,onMouseLeave:f,children:(0,t.jsx)(G.ZP,{bootstrapURLKeys:{key:"AIzaSyBMhjUXTNWE8oMeKFSOojf4FhBbbFRgS10"},defaultCenter:v.center,defaultZoom:v.zoom,children:k})})]})},q=w,$=q,ee=r(23368),te=r.n(ee),_={container:"container___BETZf",onHover:"onHover___e4V8G",gridContainer:"gridContainer___IfRHA",picContainer:"picContainer___M7Fbs",img:"img___KheDm",title:"title___G2dlm",locationAndDate:"locationAndDate___G43SS",pricing:"pricing___kIbFj"},ne=[{val:1e3*60*1,text:"\u521A\u521A"},{val:1e3*60*60,text:"\u5206\u949F\u524D"},{val:1e3*60*60*24,text:"\u5C0F\u65F6\u524D"},{val:1e3*60*60*24*30,text:"\u5929\u524D"},{val:1e3*60*60*24*365,text:"\u4E2A\u6708\u524D"},{val:1e3*60*60*24*365,text:"\u5E74\u524D"}].reverse(),ae=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,n=new Date(e).getTime(),o=new Date(i).getTime(),c=o-n,l="",d="";return ne.some(function(v){if(l=v.text,d="".concat(Math.floor(c/v.val)),v.val<c)return v.val===1e3*60*1&&(d=""),!0}),"".concat(d," ").concat(l)},ie=function(e){var i=e.list,n=i===void 0?{}:i,o=e.uid,c=e.mouseoverId,l=e.setMouseoverId,d=e.mouseClickedId,v=e.setMouseClickedId,k=m()(n,"name","--"),f=m()(n,"content","--"),u=m()(n,"price","--"),I=m()(n,"addressCity","--"),g=m()(n,"lastUpdated",""),s=g?ae(g):"--",a=m()(n,"imageIds[0]",""),L=a?"http://res.cloudinary.com/xinbenlv/image/upload/c_fill,g_north,w_400,h_300,g_center/".concat(a,".jpg"):"",H=o===c,D=o===d,j=function(C){C.preventDefault(),l(o)},N=function(C){C.preventDefault(),l("")},B=function(C){C.preventDefault(),v(function(x){return x===o?"":o})};return(0,t.jsxs)("div",{className:O()(_.container,(H||D)&&_.onHover),onMouseOver:j,onMouseLeave:N,onClick:B,"list-uid":o,children:[(0,t.jsxs)("div",{className:_.gridContainer,children:[(0,t.jsx)("div",{className:_.title,children:f}),(0,t.jsxs)("div",{className:_.locationAndDate,children:[I," ",s]}),(0,t.jsx)("div",{className:_.pricing,children:K(u)})]}),(0,t.jsx)("div",{className:_.picContainer,children:a&&(0,t.jsx)("img",{className:_.img,src:L,alt:"img"})})]})},oe=ie,se=oe,re=r(45631),le={title:"title___VK2Df"},de=function(e){var i=e.scrollRef,n=function(){i&&(i.scrollTop=0)};return(0,t.jsx)("div",{className:le.title,onClick:n,children:(0,t.jsx)(re.Z,{})})},ce=de,ve=ce,y={container:"container____MpL6",listContainer:"listContainer___a4C7h",loading:"loading___A9OBG"},Fe=function(e){return e.scrollHeight-e.scrollTop===e.clientHeight},ue=function(e){var i=e.name,n=e.loading,o=e.listData,c=e.mouseoverId,l=e.setMouseoverId,d=e.mouseClickedId,v=e.setMouseClickedId,k=e.onScrollBottom,f=(0,T.useRef)(),u=o.map(function(s){var a=m()(s,"uid","--");return(0,t.jsx)(se,{list:s,uid:a,mouseoverId:c,setMouseoverId:l,mouseClickedId:d,setMouseClickedId:v},a)}),I=function(a){a.preventDefault(),l("")},g=te()(function(s){var a=s.clientY,L=s.pageY,H=s.target;if(f.current){var D,j,N,B,M,C,x=((D=s.target)===null||D===void 0||(j=D.parentElement)===null||j===void 0||(N=j.parentElement)===null||N===void 0?void 0:N.getAttribute("list-uid"))||((B=s.target)===null||B===void 0||(M=B.parentElement)===null||M===void 0?void 0:M.getAttribute("list-uid"))||((C=s.target)===null||C===void 0?void 0:C.getAttribute("list-uid"));x&&k(x)}},100);return(0,t.jsxs)("div",{className:y.container,children:[n&&(0,t.jsx)("div",{className:y.loading,children:"Loading"}),!n&&(0,t.jsxs)("div",{className:y.listContainer,onMouseLeave:I,onWheel:g,ref:f,children:[u,(0,t.jsx)(ve,{scrollRef:f.current})]})]})},me=ue,fe=me,Ie=r(13367),Ce=r(25796),R={title:"title____ozcv",plusIcon:"plusIcon_____WUh",searchBox:"searchBox___VFJqr"},Me=function(e){var i=e.name;return(0,t.jsxs)("div",{className:R.title,children:[(0,t.jsx)("div",{className:R.plusIcon,children:(0,t.jsx)(Ce.Z,{})}),(0,t.jsx)("div",{className:R.searchBox,children:(0,t.jsx)(Ie.Z,{placeholder:"\u641C\u7D22 \u533A\u57DF/\u57CE\u5E02"})})]})},xe=Me,he=xe,ge=r(82639),je=r(85219),U={title:"title___b5ztX",sort:"sort___td5oV",condition:"condition___i7XL2"},ke=function(e){var i=e.name;return(0,t.jsxs)("div",{className:U.title,children:[(0,t.jsxs)("div",{className:U.sort,children:["\u6392\u5E8F",(0,t.jsx)(ge.Z,{})]}),(0,t.jsxs)("div",{className:U.condition,children:["\u7B5B\u9009\u6761\u4EF6",(0,t.jsx)(je.Z,{})]})]})},Le=ke,_e=Le,Se=r(30587),S={container:"container___ulS8A",searchContainer:"searchContainer___lfrVI",filterContainer:"filterContainer___nI45l",mapContainer:"mapContainer___Onay6",listContainer:"listContainer___r5KiT",actionContainer:"actionContainer___tnjK7",contentContainer:"contentContainer___vqT1m",mouseActionInfo:"mouseActionInfo___c2nxp"},De=!0,z=function(e,i){var n=e.sort(function(o,c){var l=m()(o,"lastUpdated",""),d=m()(c,"lastUpdated","");return new Date(l).getTime()<new Date(d).getTime()?1:-1});return[n.slice(0,i),n.slice(i)]},Ne=function(){var e=(0,T.useState)(!1),i=p()(e,2),n=i[0],o=i[1],c=(0,T.useState)([]),l=p()(c,2),d=l[0],v=l[1],k=(0,T.useState)([]),f=p()(k,2),u=f[0],I=f[1],g=(0,T.useState)(""),s=p()(g,2),a=s[0],L=s[1],H=(0,T.useState)(""),D=p()(H,2),j=D[0],N=D[1];(0,T.useEffect)(function(){o(!0),fetch(Se.I).then(function(M){return M.json()}).then(function(M){v(z(M,0)[1]);var C=z(M,100),x=p()(C,2),A=x[0],P=x[1];I(A),o(!1)})},[]);var B=function(C){var x=d.findIndex(function(E){return(E==null?void 0:E.uid)===C}),A=[];if(x){if(x>50){var P=Math.max(0,x-50),Be=Math.min(x+50,d.length);A=d.slice(P,Be)}else A=d.slice(0,100);I(A)}};return(0,t.jsxs)("div",{className:S.container,children:[De&&(0,t.jsxs)("div",{className:S.mouseActionInfo,children:["---",!!a&&"Mouse Over @ ".concat(a),"---",!!j&&"Mouse Click @ ".concat(j),"---"]}),(0,t.jsxs)("div",{className:S.actionContainer,children:[(0,t.jsx)("div",{className:S.searchContainer,children:(0,t.jsx)(he,{name:"Search"})}),(0,t.jsx)("div",{className:S.filterContainer,children:(0,t.jsx)(_e,{name:"Filter"})})]}),(0,t.jsxs)("div",{className:S.contentContainer,children:[(0,t.jsx)("div",{className:S.mapContainer,children:(0,t.jsx)($,{name:"MapContainer",loading:n,listData:u,mouseoverId:a,setMouseoverId:L,mouseClickedId:j,setMouseClickedId:N})}),(0,t.jsx)("div",{className:S.listContainer,children:(0,t.jsx)(fe,{name:"List",loading:n,listData:u,mouseoverId:a,setMouseoverId:L,mouseClickedId:j,setMouseClickedId:N,onScrollBottom:B})})]})]})},Te=Ne}}]);
